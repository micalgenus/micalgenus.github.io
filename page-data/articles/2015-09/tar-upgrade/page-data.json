{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/articles/2015-09/tar-upgrade","result":{"data":{"site":{"siteMetadata":{"title":"GyeongSu Han's Github Pages","author":"@micalgenus","siteUrl":"https://micalgenus.github.io"}},"markdownRemark":{"id":"1a99b7cf-90c0-5c55-b2f5-5818253926f7","html":"<p>tar의 버전이 낮아 xz등 여러 압축형식을 한번에 해제할수 없어 tar버전업을 하게되었다. 굳이 tar를 안쓰고 xz으로 해제한 뒤, tar로 풀기를 하여도 되지만 하고싶어서 하게되었다.</p>\n<p>이 기능은 <strong>1.15.1버전</strong>부터 가능하게 되었다.</p>\n<p>우선 tar를 받아주어야 한다. tar는 GNU프로젝트에 속하므로, GNU에 들어가 받으면 된다. 한국서버는 <a href=\"http://ftp.kaist.ac.kr/gnu/gnu/\">http://ftp.kaist.ac.kr/gnu/gnu/</a>로 들어가면 된다.</p>\n<p>현재 <a href=\"http://ftp.kaist.ac.kr/gnu/gnu/tar/tar-1.28.tar.gz\">1.28버전</a>이 가장 최신버전이다. 하지만 컴파일에러가 발생하여 1.27버전을 사용하도록 하겠다.</p>\n<p>우선 wget을 이용하여 <code class=\"language-text\">/usr/local/src/</code>폴더에 받아준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@localhost root<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd /usr/local/src/</span>\n<span class=\"token punctuation\">[</span>root@localhost src<span class=\"token punctuation\">]</span><span class=\"token comment\"># wget http://ftp.kaist.ac.kr/gnu/gnu/tar/tar-1.27.tar.gz</span>\n<span class=\"token punctuation\">[</span>root@localhost src<span class=\"token punctuation\">]</span><span class=\"token comment\"># tar zxf tar-1.27.tar.gz</span>\n<span class=\"token punctuation\">[</span>root@localhost src<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd tar-1.27</span></code></pre></div>\n<p>여기서 <code class=\"language-text\">./configure</code>파일을 실행시켜 준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@localhost tar-1.27<span class=\"token punctuation\">]</span><span class=\"token comment\"># ./configure</span>\nchecking <span class=\"token keyword\">for</span> a BSD-compatible install<span class=\"token punctuation\">..</span>. /usr/bin/install -c\nchecking whether build environment is sane<span class=\"token punctuation\">..</span>. <span class=\"token function\">yes</span>\nchecking <span class=\"token keyword\">for</span> a thread-safe <span class=\"token function\">mkdir</span> -p<span class=\"token punctuation\">..</span>. /bin/mkdir -p\nchecking <span class=\"token keyword\">for</span> gawk<span class=\"token punctuation\">..</span>. <span class=\"token function\">gawk</span>\n<span class=\"token punctuation\">..</span>. 생략 <span class=\"token punctuation\">..</span>.\nchecking whether <span class=\"token function\">mkfifo</span> rejects trailing slashes<span class=\"token punctuation\">..</span>. <span class=\"token function\">yes</span>\nchecking whether <span class=\"token function\">mknod</span> can create fifo without root privileges<span class=\"token punctuation\">..</span>. configure: error: <span class=\"token keyword\">in</span> <span class=\"token variable\"><span class=\"token variable\">`</span>/usr/local/src/tar-1.27':\nconfigure: error: you should not run configure as root <span class=\"token punctuation\">(</span>set <span class=\"token assign-left variable\">FORCE_UNSAFE_CONFIGURE</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token keyword\">in</span> environment to bypass this check<span class=\"token punctuation\">)</span>\nSee <span class=\"token variable\">`</span></span>config.log' <span class=\"token keyword\">for</span> <span class=\"token function\">more</span> details</code></pre></div>\n<p>에러를 보게되면 <code class=\"language-text\">set FORCE_UNSAFE_CONFIGURE=1</code>을 환경변수로 추가해야 에러를 무시할수 있다고 한다. 하라는데로 해주고 다시 컴파일한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@localhost tar-1.27<span class=\"token punctuation\">]</span><span class=\"token comment\"># export FORCE_UNSAFE_CONFIGURE=1</span>\n<span class=\"token punctuation\">[</span>root@localhost tar-1.27<span class=\"token punctuation\">]</span><span class=\"token comment\"># ./configure; make; make install;</span></code></pre></div>\n<p><code class=\"language-text\">configure</code>, <code class=\"language-text\">make</code>, <code class=\"language-text\">make install</code>을 순서대로 진행해 주게 되면 /usr/local/bin/폴더에 정상적으로 컴파일된 tar가 생성되게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@localhost tar-1.27<span class=\"token punctuation\">]</span><span class=\"token comment\"># /usr/local/bin/tar --version</span>\n<span class=\"token function\">tar</span> <span class=\"token punctuation\">(</span>GNU <span class=\"token function\">tar</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1.27</span>\nCopyright <span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">)</span> <span class=\"token number\">2013</span> Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version <span class=\"token number\">3</span> or later <span class=\"token operator\">&lt;</span>http://gnu.org/licenses/gpl.html<span class=\"token operator\">></span>.\nThis is <span class=\"token function\">free</span> software: you are <span class=\"token function\">free</span> to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nWritten by John Gilmore and Jay Fenlason.</code></pre></div>\n<p>이제 새로운 버전을 기존의 버전이 있던 곳에 대체해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@localhost tar-1.27<span class=\"token punctuation\">]</span><span class=\"token comment\"># whereis tar</span>\ntar: /bin/tar /usr/local/bin/tar /usr/include/tar.h /usr/share/man/man1/tar.1.gz\n<span class=\"token punctuation\">[</span>root@localhost tar-1.27<span class=\"token punctuation\">]</span><span class=\"token comment\"># mv /bin/tar /bin/tar_old</span>\n<span class=\"token punctuation\">[</span>root@localhost tar-1.27<span class=\"token punctuation\">]</span><span class=\"token comment\"># cp /usr/local/bin/tar /bin/tar</span>\n<span class=\"token punctuation\">[</span>root@localhost tar-1.27<span class=\"token punctuation\">]</span><span class=\"token comment\"># tar --version</span>\n<span class=\"token function\">tar</span> <span class=\"token punctuation\">(</span>GNU <span class=\"token function\">tar</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1.27</span>\nCopyright <span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">)</span> <span class=\"token number\">2013</span> Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version <span class=\"token number\">3</span> or later <span class=\"token operator\">&lt;</span>http://gnu.org/licenses/gpl.html<span class=\"token operator\">></span>.\nThis is <span class=\"token function\">free</span> software: you are <span class=\"token function\">free</span> to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nWritten by John Gilmore and Jay Fenlason.</code></pre></div>\n<p><code class=\"language-text\">whereis</code>명령을 통해 /bin/tar에 존재함을 알 수 있다. 이 파일을 백업용으로 tar_old로 변경하고, 새로운 tar를 복하하여 넣는다.</p>\n<p>version을 확인해보면 정상적으로 적용됨을 알 수 있다.</p>","frontmatter":{"categories":["Server"],"title":"tar upgrade","date":"Sep 06, 2015","tags":["Linux upgrade","tar"]}}},"pageContext":{"comments":true,"previous":{"frontmatter":{"path":"/articles/2015-09/Red-Hat-9.0-Yum","title":"Red Hat 9.0 Yum","comments":true}},"next":{"frontmatter":{"path":"/articles/2015-09/Data-segment","title":"Data segment","comments":true}}}}}