{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/articles/2020-08/Helm-chart에서-with-문법","result":{"data":{"site":{"siteMetadata":{"title":"GyeongSu Han's Github Pages","author":"@micalgenus","siteUrl":"https://micalgenus.github.io"}},"markdownRemark":{"id":"221629bc-dc1b-576b-be50-a39abea689bc","html":"<p>Helm chart를 직접 구성할 때 여러 컨트롤 플로우가 있는데, 그 중 with이라는 문법이 신기해서 기억에 남는다.</p>\n<p>다른 언어로 비교하면 this문법과 비슷하다고 생각하는데, if condition의 기능을 하면서도 <code class=\"language-text\">this</code>를 변경하는 기능이라고 생각할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">a</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">b</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></code></pre></div>\n<p>와 같이 있다고 할 때 다음과 같이 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">-</span> with .Values.test <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">a</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .a <span class=\"token punctuation\">|</span> default \"a\" <span class=\"token punctuation\">|</span> quote <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">b</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .b <span class=\"token punctuation\">|</span> default \"b\" <span class=\"token punctuation\">|</span> quote <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">-</span> end <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>helm chart에서 <code class=\"language-text\">.</code>을  <code class=\"language-text\">this</code>라고 볼 수 있는데, <code class=\"language-text\">with</code>을 사용하면 기존의 <code class=\"language-text\">.</code>을 새로운 값으로 덮어쓸 수 있다. 그래서 해당 문법을 사용할 때 기존에 있던 값중에 필요한 값이 있다면 해당 값을 저장해 둔 후 사용하는 것이 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> $Release <span class=\"token punctuation\">:</span>= .Release <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">-</span> with .Value.test <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .a <span class=\"token punctuation\">|</span> default $Release.Name <span class=\"token punctuation\">|</span> quote <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">-</span> end <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>참고: <a href=\"https://helm.sh/docs/chart_template_guide/control_structures/\">공식문서</a></p>","frontmatter":{"categories":["kubernetes"],"title":"Helm chart에서 with 문법","date":"Aug 08, 2020","tags":["helm","kubernetes"]}}},"pageContext":{"comments":true,"previous":{"frontmatter":{"path":"/articles/2019-07/Travis-ci-gcloud-프로젝트-설정","title":"Travis-ci 환경에서 gcloud 프로젝트 설정","comments":true}},"next":null}}}