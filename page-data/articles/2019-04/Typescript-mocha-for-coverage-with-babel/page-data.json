{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/articles/2019-04/Typescript-mocha-for-coverage-with-babel","webpackCompilationHash":"a1100beb6982ed09bf48","result":{"data":{"site":{"siteMetadata":{"title":"GyeongSu Han's Github Pages","author":"@micalgenus","siteUrl":"https://micalgenus.github.io"}},"markdownRemark":{"id":"c8441e6d-e565-5c25-b284-13af72530b76","html":"<p>Babel을 이용하여 Typescript를 사용하게 될 경우 mocha를 사용하기 위해서는 babel-register를 사용해야 한다.</p>\n<p><code class=\"language-text\">mocha.init.js</code>와 같이 파일을 만들어준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@babel/register'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> extensions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'.ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.tsx'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>babel <strong>7</strong>버전 이상의 경우 <code class=\"language-text\">@bable/register</code>를 그 이전의 버전은 <code class=\"language-text\">babel-register</code>를 사용하면 된다.</p>\n<p>위와 같이 적용하면 <code class=\"language-text\">.babelrc</code>파일을 적용시킬 수 있다. <code class=\"language-text\">babel-preset-typescript</code>를 사용하여 typescript를 사용한다.</p>\n<p>mocha의 coverage를 사용하기 위해서 <a href=\"https://istanbul.js.org/\">nyc</a>라는 라이브러리를 사용한다. 이를 사용하기 위해서 <code class=\"language-text\">.nycrc</code>파일을 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/**/*.ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extension\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\".ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/**/*.d.ts\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"src/tests/**/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"reporter\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"lcov\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다음과 같은 설정처럼 사용할 수 있다. <code class=\"language-text\">extension</code>옵션을 통하여 typescript파일을 허용하면 mocha를 이용하여 <code class=\"language-text\">coverage</code>를 측정할 수 있다.</p>\n<p>그 후 다음과 같은 명령어를 사용하면 coverage가 측정된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ nyc mocha -r ./mocha.init.js ./src/tests/**/*.spec.ts</code></pre></div>","frontmatter":{"categories":["Nodejs"],"title":"Babel을 이용한 Typescript환경에서 mocha coverage사용하기","date":"Apr 26, 2019","tags":["mocha","typescript","nyc","coverage"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"comments":true,"previous":{"frontmatter":{"path":"/articles/2019-04/Google-Cloud-Datastore-인덱스-수동-생성","title":"Google Cloud Datastore 인덱스 수동 생성","comments":true}},"next":{"frontmatter":{"path":"/articles/2019-07/Travis-ci-gcloud-프로젝트-설정","title":"Travis-ci 환경에서 gcloud 프로젝트 설정","comments":true}}}}}