{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/articles/2015-10/FTZ-Level5","result":{"data":{"site":{"siteMetadata":{"title":"GyeongSu Han's Github Pages","author":"@micalgenus","siteUrl":"https://micalgenus.github.io"}},"markdownRemark":{"id":"f63d4982-177d-54a0-bc9f-e42769362382","html":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>level5@ftz level5<span class=\"token punctuation\">]</span>$ <span class=\"token function\">cat</span> hint\n\n/usr/bin/level5 프로그램은 /tmp 디렉토리에\nlevel5.tmp 라는 이름의 임시파일을 생성한다.\n\n이를 이용하여 level6의 권한을 얻어라.</code></pre></div>\n<p>이 문제를 tmp폴더의 특성을 이용해 풀이하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>level5@ftz level5<span class=\"token punctuation\">]</span>$ <span class=\"token function\">ls</span> -dl /tmp\ndrwxrwxrwt    <span class=\"token number\">3</span> root     root         <span class=\"token number\">4096</span> Oct  <span class=\"token number\">9</span> <span class=\"token number\">14</span>:58 /tmp</code></pre></div>\n<p>/tmp폴더를 보게되면 sticky bit가 걸려있는데, 이를 이용해 문제를 풀 수 있다. 다른 사람의 풀이를 보게되면 race condition을 이용하여 해결하였다.</p>\n<p>우선 <code class=\"language-text\">sticky bit</code>의 특성을 살펴보면 모든 권한이 있기 때문에 누구나 이 속에 있는 파일및 폴더를 수정 및 실행할 수 있다.</p>\n<p>하지만 stiky bit로 인해 소유자를 제외한 사람은 삭제를 할 수 없다. 물론 root의 경우는 삭제가 가능하다. level5파일을 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>level5@ftz level5<span class=\"token punctuation\">]</span>$ <span class=\"token function\">ls</span> -l /usr/bin/level5\n-rws--x---    <span class=\"token number\">1</span> level6   level5      <span class=\"token number\">12236</span> Sep <span class=\"token number\">10</span>  <span class=\"token number\">2011</span> /usr/bin/level5</code></pre></div>\n<p>level5파일은 level6의 권한으로 실행이 되게 된다. 이 말은 root가 아니므로 다른 사용자가 된다. 다른 사용자의 경우 삭제를 하지 못한다는 뜻이다.</p>\n<p>level5의 권한으로 파일을 생성한 후 level6의 권한으로 이 <strong>파일을 수정</strong>할 수는 있지만, <strong>삭제의 경우 불가능</strong>하다.</p>\n<p>그러므로 level5파일이 level5.tmp파일에 답을 쓴 후 <strong>삭제를 하지 못하므로</strong>, 안에 있는 값이 남아있게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>level5@ftz tmp<span class=\"token punctuation\">]</span>$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">>></span> level5.tmp\n<span class=\"token punctuation\">[</span>level5@ftz tmp<span class=\"token punctuation\">]</span>$ <span class=\"token function\">ls</span> -l level5.tmp\n-rw-rw-r--    <span class=\"token number\">1</span> level5   level5          <span class=\"token number\">1</span> Oct  <span class=\"token number\">9</span> <span class=\"token number\">15</span>:05 level5.tmp\n<span class=\"token punctuation\">[</span>level5@ftz tmp<span class=\"token punctuation\">]</span>$ /usr/bin/level5\n<span class=\"token punctuation\">[</span>level5@ftz tmp<span class=\"token punctuation\">]</span>$ <span class=\"token function\">ls</span> -l level5.tmp\n-rw-rw-r--    <span class=\"token number\">1</span> level5   level5         <span class=\"token number\">31</span> Oct  <span class=\"token number\">9</span> <span class=\"token number\">15</span>:05 level5.tmp</code></pre></div>\n<p>이렇게 실행을 하게 되면 파일의 크기가 변경되었음을 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>level5@ftz tmp<span class=\"token punctuation\">]</span>$ <span class=\"token function\">cat</span> level5.tmp\nnext password <span class=\"token builtin class-name\">:</span></code></pre></div>","frontmatter":{"categories":["Wargame"],"title":"FTZ Level5","date":"Oct 09, 2015","tags":["FTZ"]}}},"pageContext":{"comments":true,"previous":{"frontmatter":{"path":"/articles/2015-09/sign-magnitude","title":"sign-magnitude","comments":true}},"next":{"frontmatter":{"path":"/articles/2016-01/C++-16진수-출력","title":"C++ 16진수 출력","comments":true}}}}}