{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/articles/2019-02/swap-파일-추가","webpackCompilationHash":"3114e929eeb99e438454","result":{"data":{"site":{"siteMetadata":{"title":"GyeongSu Han's Github Pages","author":"@micalgenus","siteUrl":"https://micalgenus.github.io"}},"markdownRemark":{"id":"0c01600a-6937-5216-8944-642de6978024","html":"<p>서버 자원에서 메모리가 부족할 경우 Swap 기능을 이용하여 추가해 줄 수 있습니다.</p>\n<p>Swap의 경우 <strong>스토리지</strong>를 사용하기 때문에 메모리에 비하여 성능이 좋지 않기 때문에 성능이 중요한 경우에는 메모리를 확장하는 것이 좋은 선택입니다.</p>\n<p>우선 Swap 메모리로 사용할 파일을 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@micalgenus-com /<span class=\"token punctuation\">]</span><span class=\"token comment\"># fallocate -l 4G /swap</span></code></pre></div>\n<p>CentOS7의 경우 에러가 발생하기 때문에 <code class=\"language-text\">dd</code>를 이용하여 초기화를 해주어야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@micalgenus-com /<span class=\"token punctuation\">]</span><span class=\"token comment\"># dd if=/dev/zero of=/swap count=2048 bs=1MiB</span>\n<span class=\"token number\">2048</span>+0 records <span class=\"token keyword\">in</span>\n<span class=\"token number\">2048</span>+0 records out\n<span class=\"token number\">2147483648</span> bytes <span class=\"token punctuation\">(</span><span class=\"token number\">2.1</span> GB<span class=\"token punctuation\">)</span> copied, <span class=\"token number\">55.8261</span> s, <span class=\"token number\">38.5</span> MB/s</code></pre></div>\n<p>만들어진 파일을 swap형식으로 만들고 등록해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@micalgenus-com /<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod 0600 /swap</span>\n<span class=\"token punctuation\">[</span>root@micalgenus-com /<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkswap /swap</span>\nSetting up swapspace version <span class=\"token number\">1</span>, size <span class=\"token operator\">=</span> <span class=\"token number\">2097148</span> KiB\nno label, <span class=\"token assign-left variable\">UUID</span><span class=\"token operator\">=</span>567f0de3-4556-402d-b742-e1507288de58\n<span class=\"token punctuation\">[</span>root@micalgenus-com /<span class=\"token punctuation\">]</span><span class=\"token comment\"># swapon /swap</span></code></pre></div>\n<p>적용이 잘 되었네요 ㅎㅎ</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@micalgenus-com /<span class=\"token punctuation\">]</span><span class=\"token comment\"># swapon -s</span>\nFilename                                Type            Size    Used    Priority\n/swap                                   <span class=\"token function\">file</span>    <span class=\"token number\">2097148</span> <span class=\"token number\">0</span>       -2</code></pre></div>\n<p>하지만 재시작을 할 경우에는 다시 적용해 주어야 하기 때문에, 이를 <code class=\"language-text\">/etc/fstab</code>에 추가해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@micalgenus-com /<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/fstab</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># /etc/fstab</span>\n<span class=\"token comment\"># Created by anaconda on Wed Feb 13 19:23:27 2019</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span>\n<span class=\"token comment\"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span>\n<span class=\"token comment\">#</span>\n<span class=\"token assign-left variable\">UUID</span><span class=\"token operator\">=</span>9adfe2b4-b4b7-454f-8d7a-4193208d0ea7 /               xfs     defaults        <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token comment\"># Swap</span>\n/swap                                     swap            swap    defaults        <span class=\"token number\">0</span> <span class=\"token number\">0</span></code></pre></div>","frontmatter":{"categories":["Server"],"title":"Linux swap 파일 추가","date":"Feb 15, 2019","tags":["Linux","swap"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"comments":true,"previous":{"frontmatter":{"path":"/articles/2019-02/Let's-Encrypt-wildcard-인증서","title":"Let's Encrypt wildcard 인증서","comments":true}},"next":{"frontmatter":{"path":"/articles/2019-02/CSS-블록-지정-색","title":"CSS 블록 지정 색","comments":true}}}}}