{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/articles/2019-02/Let's-Encrypt-wildcard-인증서","webpackCompilationHash":"2d536de4dfa2bf595ef1","result":{"data":{"site":{"siteMetadata":{"title":"GyeongSu Han's Github Pages","author":"@micalgenus","siteUrl":"https://micalgenus.github.io"}},"markdownRemark":{"id":"39e43916-a39e-5a4a-a495-ab72cbfc7795","html":"<p>우선 letsencrypt툴을 설치해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@micalgenus-com micalgenus<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install certbot</span></code></pre></div>\n<p>사용하고자 하는 도메인을 입력하여 wildcard인증서를 만들어 줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@micalgenus-com micalgenus<span class=\"token punctuation\">]</span><span class=\"token comment\"># certbot certonly --manual -d *.micalgenus.com -d micalgenus.com --preferred-challenges dns-01 --server https://acme-v02.api.letsencrypt.org/directory</span>\nStarting new HTTPS connection <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>: supporters.eff.org\nObtaining a new certificate\nPerforming the following challenges:\ndns-01 challenge <span class=\"token keyword\">for</span> micalgenus.com\ndns-01 challenge <span class=\"token keyword\">for</span> micalgenus.com\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nNOTE: The IP of this machine will be publicly logged as having requested this\ncertificate. If you<span class=\"token string\">'re running certbot in manual mode on a machine that is not\nyour server, please ensure you'</span>re okay with that.\nAre you OK with your IP being logged?\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n<span class=\"token punctuation\">(</span>Y<span class=\"token punctuation\">)</span>es/<span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">)</span>o: y</code></pre></div>\n<p>동의를 하지 않을 경우 진행할 수 없습니다.</p>\n<p>다음으로 넘어가면 DNS설정에서 값을 추가해 주어야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nPlease deploy a DNS TXT record under the name\n_acme-challenge.micalgenus.com with the following value:\n\nHzvGQRCEQvf6TzyDgJpttZN4nI10EHV46asfbTCJM5I\n\nBefore continuing, verify the record is deployed.\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nPress Enter to Continue\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nPlease deploy a DNS TXT record under the name\n_acme-challenge.micalgenus.com with the following value:\n\nvckTZpSo0Eh7wqPhWFW5-Tv-Wo01G6KkpBu4UF9i_SE\n\nBefore continuing, verify the record is deployed.\n<span class=\"token punctuation\">(</span>This must be <span class=\"token builtin class-name\">set</span> up <span class=\"token keyword\">in</span> addition to the previous challenges<span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span> not remove,\nreplace, or undo the previous challenge tasks yet. Note that you might be\nasked to create multiple distinct TXT records with the same name. This is\npermitted by DNS standards.<span class=\"token punctuation\">)</span>\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nPress Enter to Continue</code></pre></div>\n<p>DNS를 설정해주는 곳에 가서 두 값을 추가해 주어야 합니다.</p>\n<p>저의 경우는 <code class=\"language-text\">cloudflare</code>를 사용하기 때문에 다음과 같이 필드를 추가하였습니다.</p>\n<p><img src=\"/img/2019-02/Let-s-Encrypt-wildcard-certification/img1.png\" alt=\"img1\"></p>\n<p>값을 모두 추가하였을 경우 엔터를 눌러 진행을 하면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Waiting <span class=\"token keyword\">for</span> verification<span class=\"token punctuation\">..</span>.\nCleaning up challenges\nResetting dropped connection: acme-v02.api.letsencrypt.org\nIMPORTANT NOTES:\n - Congratulations<span class=\"token operator\">!</span> Your certificate and chain have been saved at:\n   /etc/letsencrypt/live/micalgenus.com/fullchain.pem\n   Your key <span class=\"token function\">file</span> has been saved at:\n   /etc/letsencrypt/live/micalgenus.com/privkey.pem\n   Your cert will expire on <span class=\"token number\">2019</span>-05-16. To obtain a new or tweaked\n   version of this certificate <span class=\"token keyword\">in</span> the future, simply run certbot\n   again. To non-interactively renew *all* of your certificates, run\n   <span class=\"token string\">\"certbot renew\"</span>\n - Your account credentials have been saved <span class=\"token keyword\">in</span> your Certbot\n   configuration directory at /etc/letsencrypt. You should <span class=\"token function\">make</span> a\n   secure backup of this folder now. This configuration directory will\n   also contain certificates and private keys obtained by Certbot so\n   making regular backups of this folder is ideal.\n - If you like Certbot, please consider supporting our work by:\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le</code></pre></div>\n<p>인증서 파일이 생성이 되면 해당 경로에 인증서가 생기게 됩니다. letsencrypt의 인증서 유효기간은 <code class=\"language-text\">90</code>일이기 때문에 자주 갱신을 해주어야 합니다.</p>","frontmatter":{"categories":["Server"],"title":"Let's Encrypt wildcard 인증서","date":"Feb 15, 2019","tags":["letsencryt"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"comments":true,"previous":{"frontmatter":{"path":"/articles/2019-02/change-firewalld-default-zone","title":"Firewalld zone 변경","comments":true}},"next":{"frontmatter":{"path":"/articles/2019-02/swap-파일-추가","title":"Linux swap 파일 추가","comments":true}}}}}